<h1>Library</h1>
<form [formGroup]="libForm" (ngSubmit)="onSubmit()">
  <div class="form-group row">
    <label for="name" class="col-sm-2 col-form-label">Name</label>
    <div class="col-sm-10">
      <input class="form-control-plaintext" id="name" class="form-control" formControlName="name" required>
      <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
        <div *ngIf="name.errors.required">
          Name is required.
        </div>
        <div *ngIf="name.errors.minlength">
          Name must be at least 4 characters long.
        </div>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label for="address" class="col-sm-2 col-form-label">Address</label>
    <div class="col-sm-10">
      <input id="address" class="form-control" formControlName="address">
      <div *ngIf="address.invalid && (address.dirty || address.touched)" class="alert alert-danger">
        <div *ngIf="address.errors.minlength">
          Address must be at least 4 characters long.
        </div>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label for="email" class="col-sm-2 col-form-label">Email</label>
    <div class="col-sm-10">
      <input id="email" class="form-control" formControlName="email" required>
      <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
        <div *ngIf="email.errors.email">
          Email format is not correct.
        </div>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label for="email" class="col-sm-2 col-form-label">Code</label>
    <div class="col-sm-10">
      <input id="code" class="form-control" formControlName="code">
    </div>
  </div>

  <tabset #staticTabs>
    <tab heading="Opening Hours">
      <div class="mt-3" formArrayName="opening_hours" *ngFor="let day of openingHours.controls; let i=index">
        <div [formGroupName]="i">
          <div class="form-group row">
            <div class="col-2">
              <ui-switch formControlName="is_open" [checked]="day.value.is_open" size="small" defaultBgColor="red"></ui-switch>
              {{ day.value.day }}
            </div>
            <div class="col-10">
              <ul class="list-unstyled mb-0">
                <li formArrayName="times" *ngFor="let time of day.controls.times.controls; let t=index">
                  <div [formGroupName]="t">
                    <input class="mr-2" formControlName="start_time" [readonly]="!day.value.is_open">
                    <input formControlName="end_time" [readonly]="!day.value.is_open">
                    <button
                      type="button"
                      *ngIf="day.controls.times.controls.length > 1"
                      class="btn btn-light"
                      (click)="deleteTime(i, t)"
                    ><i class="fa fa-trash" aria-hidden="true"></i></button>
                    <button
                      type="button"
                      *ngIf="day.controls.times.controls.length == 1"
                      class="btn btn-light"(click)="addTime(i)"
                    ><i class="fa fa-plus" aria-hidden="true"></i> period</button>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </tab>
  </tabset>
  <div class="clearfix">
    <div class="btn-group float-right" role="group" aria-label="Basic example">
      <button type="cancel" class="btn btn-warning" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-success" [disabled]="libForm.invalid">Submit</button>
    </div>
  </div>
</form>
