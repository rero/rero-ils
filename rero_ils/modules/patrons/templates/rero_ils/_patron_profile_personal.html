{# -*- coding: utf-8 -*-

  RERO ILS
  Copyright (C) 2019 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.

#}
{% from 'rero_ils/macros/macro.html' import dl %}

<div id="patronrecord-section" class="row mb-1 align-items-center">
  <div class="col mr-1 d-none d-lg-block">
    <div class="row p-2 bg-dark rounded text-light">
      <div class="col-lg-9">{{ _('Personal details') }}</div>
    </div>
  </div>
</div>


<div class="row mb-1">
  <div class="col mr-1 p-2 border rounded">
    {% if record.username %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Username')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.username }}
      </div>
    </div>
    {% endif %}
    {% if record.street %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Street')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.street }}
      </div>
    </div>
    {% endif %}

    {% if record.city %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('City')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.postal_code }} {{ record.city }}
      </div>
    </div>
    {% endif %}

    {% if record.phone %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Phone')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.phone }}
      </div>
    </div>
    {% endif %}

    {% if record.email %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Email')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.email }}
      </div>
    </div>
    {% endif %}


    {% if record.patron.barcode %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Patron number')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.patron.barcode[0] }}
      </div>
    </div>
    {% endif %}

    {% if record.patron.expiration_date %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Account expiration')}}:
        </a>
      </div>
      <div class="col-lg-9">
        {{ record.patron.expiration_date | format_date(
       date_format='medium',
       time_format=None,
       locale=current_i18n.locale.language
     )}}
      </div>
    </div>
    {% endif %}

    {% if record.patron %}
    <div class="row pl-2 pr-2">
      <div class="col-lg-3 font-weight-bold">
        {{_('Keep history')}}:
        </a>
      </div>
      <div class="col-lg-9">
        <i class="fa fa-circle mr- text-{{ 'success' if record.patron.keep_history else 'danger' }}"></i>
        {% if record_dumps.keep_history %}
            {{_('The loan history is saved for a maximum of six months. It is visible to you and the library staff.')}}
          {%- else %}
            {{_('The loan history is not saved.')}}
        {% endif %}
      </div>
    </div>
    {% endif %}

  </div>
</div>
<a href="/account/settings/profile/" class="btn btn-primary mt-1">Edit</a>
